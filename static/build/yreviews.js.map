{"version":3,"sources":["../src/yreviews.js"],"names":[],"mappings":"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","file":"yreviews.js","sourcesContent":["var Businesses = React.createClass({\n    getInitialState: function() {\n        return {data: []};\n    },\n    fetchData: function(api_url) {\n        $.ajax({\n            url: api_url,\n            dataType: 'json',\n            cache: false,\n            success: function(data) {\n                this.setState({data: data});\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(api_url, status, err.toString());\n            }.bind(this)\n        });  \n    },\n    componentDidMount: function() {\n        this.fetchData('/api/v1.0/businesses/');\n    },\n    render: function() {\n        var businessNodes = this.state.data.map(function(business){\n            return (\n                <Business icon_url={business.icon_url} name={business.name} id={\"#reviews/\"+business.id} url={business.url} /> \n            );\n        });\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-12\"><h4>Select business</h4></div>\n                <div className=\"col-md-6\">\n                    <ul className=\"business-list list-group\">\n                        {businessNodes} \n                    </ul>\n                </div>\n            </div>\n        );\n    }\n});\n\nvar Business = React.createClass({\n    render: function() {\n        return (\n            <li className=\"business-item list-group-item\">\n                <img src={this.props.icon_url} alt={this.props.name} className=\"img-thumbnail\"/>\n                <h4 className=\"list-group-item-heading\">\n                    <a href={this.props.url} target=\"_blank\">\n                        {this.props.name} on Yelp\n                        &nbsp;<span className=\"glyphicon glyphicon-new-window\" aria-hidden=\"true\"></span>\n                    </a>\n                </h4>\n                <a className=\"btn btn-info\" href={this.props.id}>View reviews statistics</a>\n                <span className=\"clear\"></span>\n            </li>\n        );\n    }\n});\n\nvar Reviews = React.createClass({\n    getInitialState: function() {\n        return {data: []};\n        // this.fetchData('/api/v1.0/businesses/'+this.props.location[1]+'/');\n    },\n    componentDidMount: function() {\n        this.fetchData('/api/v1.0/businesses/'+this.props.location[1]+'/');\n        drawPlot('/api/v1.0/reviews/'+this.props.location[1]+'/');\n    },\n    fetchData: function(api_url) {\n        $.ajax({\n            url: api_url,\n            dataType: 'json',\n            cache: false,\n            success: function(data) {\n                this.setState({data: data});\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(api_url, status, err.toString());\n            }.bind(this)\n        });  \n    },\n    render: function() {\n        console.log(this.state.data);\n        if (this.state.data[0] != null ) {\n            business_name = this.state.data[0].name;\n        } else {\n            business_name = \"\";\n        }\n        return (   \n            <div className=\"col-md-12\">\n                <a href=\"#\" className=\"btn btn-default\" aria-label=\"Left Align\">\n                    <span className=\"glyphicon glyphicon-chevron-left\" aria-hidden=\"true\"></span>\n                    back\n                </a>\n                <h2>{ business_name }</h2>\n                <p className=\"lead\">\n                    This bar-chart visually represents avarage rating for the given business left by the reviewrs.<br/>\n                    It's compared to the calculated avarage based on the text review using NLP algorithm.\n                </p>\n                <svg id=\"reviews-graph\"></svg>\n                <p>\n                    <span className=\"users-review\"></span> - Average rate by the user<br/>\n                    <span className=\"calculated-review\"></span> - Average rcalculated rating\n                </p>\n            </div>  \n        );\n    }\n});\n\nfunction handleNewHash() {\n    var location = window.location.hash.replace(/^#\\/?|\\/$/g, '').split('/');\n    if (location[0] == '') {\n        var application = <Businesses location={location} />;\n    }\n    if (location[0] == 'reviews') {\n        var application = <Reviews location={location} />;\n    }\n    ReactDOM.render(\n        application,\n        document.getElementById('content')\n    );\n};\n\n\nfunction drawPlot(api_url) {\n    var margin = {top: 10, right: 10, bottom: 100, left: 40},\n        margin2 = {top: 430, right: 10, bottom: 20, left: 40},\n        width = 960 - margin.left - margin.right,\n        height = 500 - margin.top - margin.bottom,\n        height2 = 500 - margin2.top - margin2.bottom;\n\n    var x = d3.time.scale().range([0, width]),\n        x2 = d3.time.scale().range([0, width]);\n\n    var y = d3.scale.linear().range([height, 0]),\n        y2 = d3.scale.linear().range([height2, 0]);\n\n    var xAxis = d3.svg.axis().scale(x).orient(\"bottom\"),\n        xAxis2 = d3.svg.axis().scale(x2).orient(\"bottom\");\n\n    var yAxis = d3.svg.axis().scale(y).orient(\"left\");\n\n    var brush = d3.svg.brush()\n        .x(x2)\n        .on(\"brush\", brushed);\n\n    var tip = d3.tip()\n        .attr('class', 'd3-tip')\n        .offset([-10, 0])\n        .html(function(d) {\n        return \"<h4>\" + d.date + \" Avarage reviews:</h4>\" +\n               \"<p><strong>Users rating:</strong> <span style='color:red;'>\" + d.rating + \"</span></p>\" +\n               \"<p><strong>Calculated rating:</strong> <span style='color:red;'>\" + d.score + \"</span></p>\" +\n               \"<p><strong>Number of reviews:</strong> <span style='color:red;'>\" + d.num_reviews + \"</span></p>\";\n    })\n\n    var svg = d3.select(\"#reviews-graph\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom);\n\n    svg.append(\"defs\").append(\"clipPath\")\n        .attr(\"id\", \"clip\")\n        .append(\"rect\")\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n\n    svg.call(tip);\n\n    var focus = svg.append(\"g\")\n        .attr(\"class\", \"focus\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    var context = svg.append(\"g\")\n        .attr(\"class\", \"context\")\n        .attr(\"transform\", \"translate(\" + margin2.left + \",\" + margin2.top + \")\");\n\n    d3.json(api_url, function(error, data) {\n        x.domain(d3.extent(data.map(function(d) { return d3.time.format(\"%b %Y\").parse(d.date); })));\n        y.domain([0, d3.max(data, function(d) { return +d.rating;; })]);\n\n        x2.domain(x.domain());\n        y2.domain(y.domain());\n        \n        focus.append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis);\n\n        focus.append(\"g\")\n            .attr(\"class\", \"y axis\")\n            .call(yAxis);\n\n        bars_holder = focus.append(\"g\")\n            .attr(\"clip-path\", \"url(#clip)\");\n\n        bars = bars_holder.selectAll(\".bar\")\n            .data(data)\n            .enter();\n\n        bars.append(\"rect\")\n            .attr(\"class\", \"bar1 bar\")\n            .attr(\"x\", function(d) { return x(d3.time.format(\"%b %Y\").parse(d.date)) - 4; })\n            .attr(\"width\", width/data.length/2)\n            .attr(\"y\", function(d) { return y(d.rating); })\n            .attr(\"height\", function(d) { return height - y(d.rating); })\n            .on('mouseover', tip.show)\n            .on('mouseout', tip.hide);\n\n        bars.append(\"rect\")\n            .attr(\"class\", \"bar2 bar\")\n            .attr(\"x\", function(d) { return x(d3.time.format(\"%b %Y\").parse(d.date)); })\n            .attr(\"width\", width/data.length/2)\n            .attr(\"y\", function(d) { return y(d.score); })\n            .attr(\"height\", function(d) { return height - y(d.score); })\n            .on('mouseover', tip.show)\n            .on('mouseout', tip.hide);\n\n        context.append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", \"translate(0,\" + height2 + \")\")\n            .call(xAxis2);\n        \n        bars2 = context.selectAll(\".bar\")\n            .data(data)\n            .enter();\n\n        bars2.append(\"rect\")\n            .attr(\"class\", \"bar1\")\n            .attr(\"x\", function(d) { return x2(d3.time.format(\"%b %Y\").parse(d.date)); })\n            .attr(\"width\", width/data.length/2)\n            .attr(\"y\", function(d) { return y2(d.rating); })\n            .attr(\"height\", function(d) { return height2 - y2(d.rating); });\n\n        bars2.append(\"rect\")\n            .attr(\"class\", \"bar2\")\n            .attr(\"x\", function(d) { return x2(d3.time.format(\"%b %Y\").parse(d.date)) - 4; })\n            .attr(\"width\", width/data.length/2)\n            .attr(\"y\", function(d) { return y2(d.score); })\n            .attr(\"height\", function(d) { return height2 - y2(d.score); });\n\n        context.append(\"g\")\n            .attr(\"class\", \"x brush\")\n            .call(brush)\n            .selectAll(\"rect\")\n            .attr(\"y\", -6)\n            .attr(\"height\", height2 + 7);\n    });  \n\n    function brushed() {\n        x.domain(brush.empty() ? x2.domain() : brush.extent());\n        focus.selectAll(\".bar1\")\n            .attr(\"x\", function(d) { return x(d3.time.format(\"%b %Y\").parse(d.date)) - 10; })\n            .attr(\"height\", function(d) { return height - y(d.rating); })\n            .attr(\"width\", function(d) { return 10; });\n\n        focus.selectAll(\".bar2\")\n            .attr(\"x\", function(d) { return x(d3.time.format(\"%b %Y\").parse(d.date)); })\n            .attr(\"height\", function(d) { return height - y(d.score); })\n            .attr(\"width\", function(d) { return 10; });\n\n        focus.select(\".x.axis\").call(xAxis);\n    };\n};\n\nhandleNewHash();\nwindow.addEventListener('hashchange', handleNewHash, false);\n\n"]}